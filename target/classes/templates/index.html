<!DOCTYPE html>
<html>
<head>
    <title>SAT Results Management</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
            crossorigin="anonymous"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        background-color: #330000;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25' viewBox='0 0 800 400'%3E%3Cdefs%3E%3CradialGradient id='a' cx='396' cy='281' r='514' gradientUnits='userSpaceOnUse'%3E%3Cstop offset='0' stop-color='%23D18'/%3E%3Cstop offset='1' stop-color='%23330000'/%3E%3C/radialGradient%3E%3ClinearGradient id='b' gradientUnits='userSpaceOnUse' x1='400' y1='148' x2='400' y2='333'%3E%3Cstop offset='0' stop-color='%23FA3' stop-opacity='0'/%3E%3Cstop offset='1' stop-color='%23FA3' stop-opacity='0.5'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect fill='url(%23a)' width='800' height='400'/%3E%3Cg fill-opacity='0.4'%3E%3Ccircle fill='url(%23b)' cx='267.5' cy='61' r='300'/%3E%3Ccircle fill='url(%23b)' cx='532.5' cy='61' r='300'/%3E%3Ccircle fill='url(%23b)' cx='400' cy='30' r='300'/%3E%3C/g%3E%3C/svg%3E");
        background-attachment: fixed;
        background-size: cover;
      }

      h1 {
        text-align: center;
        font-size: 40px;
        font-weight: 700;
        color : #fff;
        margin: 30px 0px;
      }

      h2, #rank-result {
        font-size: 20px;
        font-weight: 700;
        color : #ffffffb5;
        align-self: center;
      }

      form, .view-data-container, ul {
        margin-bottom: 20px;
        width: 500px;
        padding: 40px;
        background: rgba(255, 255, 255, 0.3);
        box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        backdrop-filter: blur(4.5px);
        -webkit-backdrop-filter: blur(4.5px);
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.18);
        display: flex;
        flex-direction: column;
      }

      label {
        font-weight: bold;
      }

      input[type="text"],
      input[type="number"] {
        margin-bottom: 10px;
        padding: 5px 20px;
        width: 100%;
        background-color: rgba(240, 248, 255, 0.523);
        border: 1px solid white;
        border-radius: 5px;
        outline: none;
      }

      button {
        padding: 5px 10px;
        display: inline-block;
        outline: none;
        cursor: pointer;
        font-size: 16px;
        line-height: 20px;
        font-weight: 600;
        border-radius: 8px;
        padding: 14px 24px;
        border: none;
        transition: box-shadow 0.2s ease 0s, -ms-transform 0.1s ease 0s,
          -webkit-transform 0.1s ease 0s, transform 0.1s ease 0s;
        background: linear-gradient(
          to right,
          rgb(230, 30, 77) 0%,
          rgb(227, 28, 95) 50%,
          rgb(215, 4, 102) 100%
        );
        color: #fff;
        width: 300px;
        align-self: center;
      }

      #view-all-results {
        margin-top: 10px;
        white-space: pre-line;
      }

      #rank-result {
        margin-top: 10px;
      }

      ul{
        flex-direction: row;
        justify-content: center;
        list-style: none;
        width: 800px;
        padding: 20px;
      }

      li{
        margin: 0px 15px;
        color: #fff;
      }

      li:hover{
        margin: 0px 5px;
        color: black;
      }
       li a{
        text-decoration: none;
        color: #fff;
       }
       a:hover{
        margin: 0px 5px;
        color: black;
      }

    </style>
</head>
<body>
<h1>SAT Results Management</h1>

<ul>
    <li><a href = "#insert-form"> | Insert |</a></li>
    <li><a href = "#view">| View_All_Data |</a></li>
    <li><a href = "#get-rank-form">| Get_Rank |</a></li>
    <li><a href = "#update-score-form">| Update_Score |</a></li>
    <li><a href = "#delete-record-form">| Delete_Record |</a></li>
</ul>


<form id="insert-form">
    <h2>Insert Data</h2>
    <label for="name">Name:</label>
    <input type="text" id="name" required />
    <br />
    <label for="address">Address:</label>
    <input type="text" id="address" required />
    <br />
    <label for="city">City:</label>
    <input type="text" id="city" required />
    <br />
    <label for="country">Country:</label>
    <input type="text" id="country" required />
    <br />
    <label for="pincode">Pincode:</label>
    <input type="text" id="pincode" required />
    <br />
    <label for="score">SAT Score:</label>
    <input type="number" id="score" required />
    <br />
    <button type="submit">Insert</button>
</form>

<div class="view-data-container" id = "view">
    <h2>View All Data</h2>
    <button id="view-all-btn">View All</button>
    <div id="view-all-results"></div>
</div>

<form id="get-rank-form">
    <h2>Get Rank</h2>
    <label for="rank-name">Name:</label>
    <input type="text" id="rank-name" required />
    <br />
    <button type="submit">Get Rank</button>
    <div id="rank-result"></div>
</form>

<form id="update-score-form">
    <h2>Update Score</h2>
    <label for="update-name">Name:</label>
    <input type="text" id="update-name" required />
    <br />
    <label for="new-score">New SAT Score:</label>
    <input type="number" id="new-score" required />
    <br />
    <button type="submit">Update Score</button>
</form>

<form id="delete-record-form">
    <h2>Delete Record</h2>
    <label for="delete-name">Name:</label>
    <input type="text" id="delete-name" required />
    <br />
    <button type="submit">Delete Record</button>
</form>

<script>
      document
        .getElementById("insert-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const name = document.getElementById("name").value;
          const address = document.getElementById("address").value;
          const city = document.getElementById("city").value;
          const country = document.getElementById("country").value;
          const pincode = document.getElementById("pincode").value;
          const score = parseInt(document.getElementById("score").value);

          const data = {
            name: name,
            address: address,
            city: city,
            country: country,
            pincode: pincode,
            satScore: score,
          };
          console.log(data);
          fetch("/sat-results", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(data),
          })
            .then(function (response) {
              console.log(response);
              if (response.ok) {
                alert("Data inserted successfully!");
                document.getElementById("insert-form").reset();
              } else {
                alert("Error inserting data. Duplicate entry.");
              }
            })
            .catch(function (error) {
              console.error("Error:", error);
              alert("An error occurred. Please try again.");
            });
        });

      document
        .getElementById("view-all-btn")
        .addEventListener("click", function () {
          fetch("/sat-results/list")
            .then(function (response) {
              if (response.ok) {
                return response.json();
              } else {
                throw new Error("Error retrieving data.");
              }
            })
            .then(function (data) {
              let results = "";
              for (let i = 0; i < data.length; i++) {
                const result = data[i];
                results += `Name: ${result.name}\n`;
                results += `Address: ${result.address}\n`;
                results += `City: ${result.city}\n`;
                results += `Country: ${result.country}\n`;
                results += `Pincode: ${result.pincode}\n`;
                results += `SAT Score: ${result.satScore}\n`;
                results += `Passed: ${result.passed}\n\n`;
              }
              document.getElementById("view-all-results").textContent = results;
            })
            .catch(function (error) {
              console.error("Error:", error);
              alert("An error occurred. Please try again.");
            });
        });

      document
        .getElementById("get-rank-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const name = document.getElementById("rank-name").value;

          fetch(`/sat-results/rank/${name}`)
            .then(function (response) {
              if (response.ok) {
                return response.text();
              } else {
                throw new Error("Error retrieving rank.");
              }
            })
            .then(function (rank) {
              document.getElementById(
                "rank-result"
              ).textContent = `Rank: ${rank}`;
            })
            .catch(function (error) {
              console.error("Error:", error);
              alert("An error occurred. Please try again.");
            });
        });

      document
        .getElementById("update-score-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const name = document.getElementById("update-name").value;
          const newScore = parseInt(document.getElementById("new-score").value);

          fetch(`/sat-results/${name}`, {
            method: "PUT",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(newScore),
          })
            .then(function (response) {
              if (response.ok) {
                alert("Score updated successfully!");
                document.getElementById("update-score-form").reset();
              } else {
                alert("Error updating score. Entry with this name does not exist.");
              }
            })
            .catch(function (error) {
              console.error("Error:", error);
              alert("An error occurred. Please try again.");
            });
        });

      document
        .getElementById("delete-record-form")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          const name = document.getElementById("delete-name").value;

          fetch(`/sat-results/${name}`, {
            method: "DELETE",
          })
            .then(function (response) {
              if (response.ok) {
                alert("Record deleted successfully!");
                document.getElementById("delete-record-form").reset();
              } else {
                alert("Error deleting record. Entry with this name does not exist.");
              }
            })
            .catch(function (error) {
              console.error("Error:", error);
              alert("An error occurred. Please try again.");
            });
        });
    </script>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"
></script>
</body>
</html>